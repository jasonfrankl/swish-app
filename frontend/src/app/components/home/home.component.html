<div *ngIf="loadingApp">
    <app-loading></app-loading>
</div>
<div *ngIf="!loading">
    <div class="header-container">
        <div class="header">
            <p>Box Score Notification App</p>
        </div>
        <div class="login-container">
            <button [routerLink]="['/login']">Login</button>
        </div>
    </div>

    <!-- Favorites Section -->
    <div class="favorites-section" *ngIf="favoriteGames.length > 0">
        <h2>⭐ Favorites</h2>
        <div class="favorites-container">
            <div *ngFor="let game of favoriteGames" class="favorite-card">
                <div class="favorite-top">
                    <h4>{{ game.homeTeam }}</h4>
                    <span>vs.</span>
                    <h4>{{ game.awayTeam }}</h4>
                    <button class="star-button favorite" (click)="removeFavorite(game)" title="Remove from favorites">
                        ⭐
                    </button>
                </div>
                <div class="favorite-content">
                    <p>Current Period: <strong>{{ game.currentPeriod }} - {{ game.gameClock }}</strong></p>
                    <p>Score: <strong>{{ game.homeScore }} - {{ game.awayScore }}</strong></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Search Bar -->
    <div class="search-container">
        <input type="text" class="search-input" placeholder="Search teams by name..." [(ngModel)]="searchQuery"
            (input)="onSearchChange()" />
    </div>

    <div class="radio-inputs">
        <label class="radio">
            <input type="radio" name="radio" (change)="onSportChange('basketball-men')"
                [checked]="selectedSport === 'basketball-men'">
            <span class="name">NCAAM</span>
        </label>
        <label class="radio">
            <input type="radio" name="radio" (change)="onSportChange('basketball-women')"
                [checked]="selectedSport === 'basketball-women'">
            <span class="name">NCAAW</span>
        </label>
        <label class="radio">
            <input type="radio" name="radio" (change)="onSportChange('football')"
                [checked]="selectedSport === 'football'">
            <span class="name">CFB</span>
        </label>
    </div>
    <div *ngIf="loading">
        <app-loading></app-loading>
    </div>
    <h1>Currently Playing</h1>
    <div class="game-cards-container" *ngIf="filteredGames.length > 0; else noGames">
        <div *ngFor="let game of filteredGames" class="card">
            <div class="top">
                <h3>{{ game.homeTeam }}</h3>
                <span>vs.</span>
                <h3>{{ game.awayTeam }}</h3>
                <button class="star-button" [class.favorite]="isFavorite(game)" (click)="toggleFavorite(game)"
                    [title]="isFavorite(game) ? 'Remove from favorites' : 'Add to favorites'">
                    {{ isFavorite(game) ? '⭐' : '☆' }}
                </button>
            </div>
            <div class="content">
                <p>Current Period: <strong>{{ game.currentPeriod }} - {{game.gameClock}}</strong></p>
                <p>Score:</p>
                <p>{{ game.homeScore }} - {{ game.awayScore }}</p>
            </div>
        </div>
    </div>
    <ng-template #noGames>
        <p>{{ searchQuery ? 'No games found matching your search.' : 'No Games currently in Progress' }}</p>
    </ng-template>
</div>